<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>KB</title>

    <link type="image/x-icon" rel="icon" href="https://icons.iconarchive.com/icons/sykonist/popular-sites/32/Wikipedia-globe-icon.png"/>

    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css"/>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver"></script>
    <script src="https://unpkg.com/vue@latest/dist/vue.min.js"></script>
    <script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>
    <script src="https://unpkg.com/vue-async-computed"></script>
    <style>
      :root {
        --japanese-indigo: #1B4157;
        --jelly-bean-blue: #437C9B;
        --moonstones-blue: #71A6C1;
        --steel-wiki-blue: #3888B6;
      }
      body {
        background-color: whitesmoke;
        -webkit-touch-callout: none; /* iOS Safari */
          -webkit-user-select: none; /* Safari */
                  user-select: none;
      }
      h1 {
        text-transform: capitalize;
      }
      .bg-steel-blue {
        background-color: var(--steel-wiki-blue);
      }
      .bd-steel-blue {
        color: var(--steel-wiki-blue);
        border-color: var(--steel-wiki-blue);
      }
      .bg-steel-blue-hover:hover {
        background-color: var(--steel-wiki-blue);
      }
      .btn-choice {
        border-radius: 0%;
        border-color: var(--moonstones-blue);
        border-style: dotted;
        border-width: 1px;
        padding: 0.15rem;
        font-size: 1.5rem;
        font-family:'Segoe UI', 'Microsoft YaHei', "Hiragino Kaku Gothic Pro", 'MS PGothic', Tahoma, Geneva, Verdana, sans-serif;
        overflow-wrap: break-word;
      }
      .btn-secondary {
        background-color: var(--jelly-bean-blue);
      }
      .btn-secondary:hover {
        background-color: var(--japanese-indigo);
      }
      .btn-secondary:focus {
        background-color: var(--japanese-indigo);
      }
      .btn-outline-light {
        border-color: transparent;
      }
      a.title-link {
        color: black;
        background-color: #f5f5f58f;
        font-family: 'Microsoft YaHei', "Hiragino Kaku Gothic Pro", 'PingFang TC', 'Hiragino Sans','MS PGothic', Tahoma, Geneva, Verdana, sans-serif;
        text-decoration: none;
      }
      .title {
        background-size: contain;
        background-repeat: no-repeat;
        background-position: top right;
      }
      .progress {
        border-radius: 0%;
      }
      .custom-switch {
        width: 12.25rem;
      }
      .custom-control-input:checked~.custom-control-label::before {
        background-color: var(--steel-wiki-blue)!important;
      }
      .dropdown-lang .dropdown-menu {
        position: fixed!important;
        transform: translate(0%, 0%)!important;
        left: 1%!important;
        top: 5%!important;
        width: 98%;
        min-height: 90%;
        max-height: 700px;
        border: none;
        overflow: auto;
        z-index: 10000;
      }
      .dropdown-lang button {
        position: absolute;
        white-space: nowrap;
        color: var(--japanese-indigo);
      }
      .dropdown-lang button:hover {
        z-index: 100;
      }
      .group-hypernyms {
        column-count: 5;
      }        
      @media (max-width: 1200px) {
        .group-hypernyms {
          column-count: 4;
        }
      }
      @media (max-width: 992px) {
        .group-hypernyms {
          column-count: 3;
        }
      }
      @media (max-width: 768px) {
        .group-hypernyms {
          column-count: 2;
        }
      }
      @media (max-width: 576px) {
        body, html {
          padding:0;
          overflow-x: hidden;
        }
        .navbar-fixed-top, .navbar-fixed-bottom, .navbar-static-top {
          margin-left: 0;
          margin-right: 0;
          margin-bottom:0;
        }
        .btn-choice {
          font-size: 1.2rem;
        }
        .mobile-w-0 {
          max-width: 0%;
        }
      }
    </style>
  </head>
  <body>
    <div id="app">
      <b-jumbotron class="" :header="pageTitle" :lead="headerLead" v-show="!quizStarted">
        <b-container>
          <b-form-group
            v-if="!quizStarted"
            horizontal
            label-cols-sm="5"
            label-cols-md="4"
            :label="labelAnswer"
          >
            <div style="display: flex;">
              <b-form-select v-model="alang" :options="alangOptions" label="alang"></b-form-select>
              <b-dropdown variant="outline-light" class="dropdown-lang" text="🗺" no-caret>
                <b-btn v-for="(l,i) in aLeximap" :key="i" 
                  class="btn-dropdown-lang" variant="outline-light" :size="i>0?'sm':''" 
                  :style="`top:${l.coord_y-120}px;left:${l.coord_x*Math.max(1,windowWidth/1440)-100}px;`"
                  @click="onClickLeximapBtnAlang($event, l)">
                  {{l.text}}
                </b-btn>
              </b-dropdown>
            </div>
          </b-form-group>
          <b-form-group
            v-if="!quizStarted"
            horizontal
            label-cols-sm="5"
            label-cols-md="4"
            :label="labelQuestion"
          >
            <div style="display: flex;">
              <b-form-select v-model="qlang" :options="qlangOptions" label="qlang" class=""></b-form-select>
              <b-dropdown variant="outline-light" class="dropdown-lang" text="🗺" no-caret>
                <b-btn v-for="(l,i) in qLeximap" :key="i" 
                  class="btn-dropdown-lang" variant="outline-light" size="sm"
                  :style="`top:${l.coord_y-120}px;left:${l.coord_x*Math.max(1,windowWidth/1440)-100}px;color:${l.value==alang?'var(--blue)':'var(--japanese-indigo)'};`"
                  @click="onClickLeximapBtnQlang($event, l)">
                  {{l.text}}
                </b-btn>
              </b-dropdown>
            </div>
          </b-form-group>
          <b-row>
            <b-col class="col-sm-5 col-md-4 p-1 mobile-w-0"></b-col>
            <b-col class="pl-2">
              <b-btn style="width: 100%;" :disabled="startBtnDisabled" :class="{disabled:startBtnDisabled}"
                v-if="!quizStarted&&qlang&&alang&&qlang!==alang"
                @click="newGame">
                 &gt;&gt;&gt; &nbsp; {{ startBtnTxt }} &nbsp; &lt;&lt;&lt; 
              </b-btn>
            </b-col>
          </b-row>
        </b-container>
      </b-jumbotron>
      
      <b-container>
        <b-row v-if="quizStarted">
          <b-collapse id="collapse-hypernyms">
            <b-form-group label=" " v-slot="{ ariaDescribedby }">
              <b-form-checkbox-group class="group-hypernyms mt-4"
              v-model="hypernyms"
              :options="hypernym_options"
              :aria-describedby="ariaDescribedby"
              stacked switches size="sm"
              ></b-form-checkbox-group>
              <b-col class="text-center">
                <b-btn variant="outline-light" size="lg" style="font-size: xx-large;" @click="switchHypernymLang">🔄</b-btn>
                <b-btn variant="outline-light" size="lg" style="font-size: xx-large;" @click="reverseHypernymSelect">🔛</b-btn>
              </b-col>
            </b-form-group>
          </b-collapse>
          <b-col class="flex">
            <b-btn v-b-toggle.collapse-hypernyms  class="float-right" variant="outline-light">💣</b-btn>
          </b-col>
        </b-row>

        <b-row class="flex" v-if="quizStarted">
          <b-progress class="d-inline-flex col col-9 col-sm-10 col-xl-11 p-0" max="63" height="2rem" striped :animated="progressAnimate">
            <b-progress-bar class="bg-steel-blue" style="animation-direction: reverse;"
              :value="lvl+10"
              :label="`Lv. ${lvl} (${quizPlayed})`">
            </b-progress-bar>
          </b-progress>
          <b-col class="col-3 col-sm-2 col-xl-1 pr-0">
            <b-btn class="w-100 bd-steel-blue bg-steel-blue-hover" variant="outline-primary"  v-on:click="endGame">End</b-btn>
          </b-col>
        </b-row>

        <div class="justify-content-center">
          <b-row v-if="quizStarted" >
            <b-col class="title py-5 px-0" 
              sm="11" md="10" lg="9" xl="7"
              @touchstart="touchStart($event)"
              @touchend="touchEnd($event)"
              @click="toggleDisplayTitleImg"
              :style="displayTitleImage ? `background-image:url(${titleImage});` : 'border-right:1px outset;box-sizing:border-box;'">
              <h2 class="display-3 my-4 mx-2">
                <a class="title-link" target="_blank"
                  @mouseover="speakTitle"
                  @click="toggleDisplayTitleImg"
                  :href="`https://${qlang}.wikipedia.org/wiki/${q_title}`">
                  {{ q_title }}
                </a>
              </h2>
            </b-col>
          </b-row>

          <b-row>
            <b-col sm="11" md="10" lg="9" xl="7" class="choices p-0">
              <b-button secondary class="col-4 btn-choice"
                v-for="(choice,index) in choices" :key="index"
                :style="`height: ${choiceHeight}px`"
                :id="`choice-${index}`"
                @click="selectChoice($event,index)"
                @touchstart="touchStart($event,index)"
                @touchend="touchEnd($event)">
                {{ choice }}
              </b-button>
            </b-col>
          </b-row>
        </div>

        <div v-if="showScore">
          <b-alert variant="success" :show="showScore">Game Over ~   knowledge score : {{ score }}%</b-alert>
          <b-progress class="my-1"
            :max="quizPlayed"
            :title="Object.values(board).filter(v=>v.length>0).length +' Levels'"
            v-b-popover.hover.left="`${quizPlayed}❔　${quizCorrect}✔　${quizPlayed-quizCorrect}❌`"
            v-b-popover.click.left="`${quizPlayed}❔　${quizCorrect}✔　${quizPlayed-quizCorrect}❌`">
            <b-progress-bar :value="quizCorrect" variant="success"></b-progress-bar>
            <b-progress-bar :value="quizPlayed-quizCorrect" variant="danger"></b-progress-bar>
          </b-progress>
          <b-progress v-for="([k,v], i) in Object.entries(board)" :key="i"
            :max="Math.max.apply(Math,Object.values(board).map(v => v.length))"
            :title="'Level '+ k"
            :animated="k==lvl"
            v-b-popover.hover.left="`${v.length}❔　${v.filter(u=>u>0).length}✔　${v.filter(u=>u<0).length}❌`"
            v-if="v.length > 0">
            <b-progress-bar v-for="(u, index) in scoreBar(v)" :key="index"
              :value="Math.abs(u)" :variant="u>0?'success':'danger'"></b-progress-bar>
          </b-progress>
        </div>
      </b-container>
    </div>

    <script>
      window.app = new Vue({
        el: '#app',
        data: {
          name: '',
          qlang: '',
          alang: '',
          qlang_options: [{ value: '', text: '(Question Language)' }],
          alang_options: [{ value: '', text: '(Answers Language)' }],
          aLeximap: [],
          qLeximap: [],
          q_title: '',
          q_id: 0,
          lvl: 1,
          board: {},
          choices: [],
          answer: -1,
          score: -1,
          windowWidth: window.innerWidth,
          displayTitleImage: true,
          startBtnDisabled: false,
          progressAnimate: false,
          touchTimer: null,
          touchTimerLong: null,
          hypernyms: [],
          hypernym_options: [],
          hypernym_index: 1,
        },
        mounted: function() {
          //populate language options
          fetch(`${window.location.origin}/language`)
          .then(resp => resp.json())
          .then(data => {
            this.alang_options = data
            let browserLangs = [...window.navigator.languages.reduce((s,a)=>{s.add(a.slice(0,2));return s},new Set())]
            this.alang = browserLangs[0] ? browserLangs[0] : ''
            this.qlang = browserLangs[1] ? browserLangs[1] : ''
            // populate language lexical map selector
            this.aLeximap = data.filter(d => d.coord_x > 0).map(d=>({
              value: d.value,
              text: d.text,
              coord_x: d.coord_x,
              coord_y: d.coord_y,
            }))
          })
          .then(() => { this.popHypernym(true) })

          window.addEventListener('keydown', (e) => {
            const KEYMAP = {'7':0,'8':1,'9':2,'4':3,'5':4,'6':5,'1':6,'2':7,'3':8,}
            const MOVEMAP = {
              'ArrowUp': i => i-3 >= 0 ? i-3 : i-3+9,
              'ArrowDown': i => i+3 < 9 ? i+3 : i+3-9,
              'ArrowLeft': i => [0,3,6].indexOf(i) < 0 ? i-1 : i+2,
              'ArrowRight': i => [2,5,8].indexOf(i) < 0 ? i+1 : i-2,
            }
            if(this.quizStarted) {
              let c = document.getElementById('choice-'+KEYMAP[e.key])
              if (c) c.click()
              else {
                if (MOVEMAP[e.key] && document.activeElement && document.activeElement.classList.contains('btn-choice')){
                  i = parseInt(document.activeElement.id.slice(-1));
                  document.getElementById('choice-'+MOVEMAP[e.key](i)).focus()
                }
              }
              if (e.key == '0') this.speakTitle()
              if (e.key == '+') document.getElementsByClassName('title-link')[0].click()
              if (e.key == '.') this.displayTitleImage = !this.displayTitleImage
            }
          })

          window.onresize = () => {
            this.windowWidth = window.innerWidth
          }
          window.onbeforeunload = () => {
            if (this.quizStarted) return 'Quiz is running. Are you sure to quit?'
          }
        },
        computed: {
          showScore() {
            return this.score >= 0
          },
          quizStarted() {
            return this.choices.length > 0
          },
          qlangOptions() {
            return this.qlang_options.filter(l => l.value != this.alang)
          },
          alangOptions() {
            return this.alang_options
          },
          labelQuestion() {
            return this.alang_options.find(l => l.value == this.alang).label_q || this.alang_options[0].label_q
          },
          labelAnswer() {
            return this.alang_options.find(l => l.value == this.alang).label_a || this.alang_options[0].label_a
          },
          quizPlayed() {
            return Object.values(this.board).reduce((s,v) => s+v.length, 0)
          },
          quizCorrect() {
            return Object.values(this.board).reduce((s,v) => s+v.filter(u=>u>0).length, 0)
          },
          choiceHeight() {
            this.windowWidth
            let row = document.getElementsByClassName('choices')[0]
            let width =  window.getComputedStyle(row).width.slice(0, -2)
            return width / 3
          },
        },
        asyncComputed: {
          async titleImage() {
            if (!this.displayTitleImage) return '#'

            let sparqalQuery = `
SELECT ?item ?pic ?flag ?chem ?logo ?taxnrg ?locator ?dist ?collage ?icon ?trid ?schem ?rimg {
VALUES (?item) {(wd:Q${this.q_id})}
OPTIONAL { ?item wdt:P18 ?pic }
OPTIONAL { ?item wdt:P41 ?flag }
OPTIONAL { ?item wdt:P117 ?chem }
OPTIONAL { ?item wdt:P154 ?logo }
OPTIONAL { ?item wdt:P181 ?taxnrg }
OPTIONAL { ?item wdt:P242 ?locator }
OPTIONAL { ?item wdt:P1846 ?dist }
OPTIONAL { ?item wdt:P2716 ?collage }
OPTIONAL { ?item wdt:P2910 ?icon }
OPTIONAL { ?item wdt:P4896 ?trid }
OPTIONAL { ?item wdt:P5555 ?schem }
OPTIONAL { ?item wdt:P6802 ?rimg }
}`
            let resp = await fetch(`https://query.wikidata.org/sparql?query=${sparqalQuery}`, {
              headers: {'Accept':'application/json'},
            })
            let data = await resp.json()
            const IMG_TYPE = ['collage','trid','schem','chem','pic','dist','locator','taxnrg','flag','logo','icon','rimg']
            let imgUrls = IMG_TYPE.map(i => {
              let t = data.results.bindings.filter(b => b[i])
              return t.length>0 ? t[Math.floor(t.length*Math.random())][i].value : null
            })
            //DEBUG - add wikidata img
            // if (imgUrls.find(i=>i)){
            //   setTimeout(() => {
            //     document.getElementById('choice-'+this.answer).click()
            //   }, 300);
            // } else {
            //   document.getElementsByClassName('title-link')[0].click()
            //   window.open(data.results.bindings[0].item.value, '_blank')
            //   // setTimeout(() => {
            //   //   document.getElementById('choice-'+Math.floor(Math.random()*0+this.answer)%9).click()
            //   // }, 100);
            // }
            // return '#'
            //END_DEBUG
            return imgUrls.find(i=>i) || '#'
          },
          async qLeximap() {
            if (!this.alang) return
            const resp = await fetch(`${window.location.origin}/language?lang=${this.alang}`)
            const data = await resp.json()
            this.qlang_options = data
            return data.filter(l => l.coord_x > 0)
          },
          async pageTitle() {
            const title = 'Knowledge bomb'
            const resp = await fetch("https://translate.api.skitzen.com/translate", {
              method: "POST",
              body: JSON.stringify({
                q: title,
                source: "en",
                target: this.alang,
                format: "text"
              }),
              headers: { "Content-Type": "application/json" }
            })
            return (await resp.json()).translatedText || title
          },
          async startBtnTxt() {
            const txt = 'start'
            const resp = await fetch("https://translate.mentality.rip/translate", {
              method: "POST",
              body: JSON.stringify({
                q: txt,
                source: "en",
                target: this.alang,
                format: "text"
              }),
              headers: { "Content-Type": "application/json" }
            })
            return ((await resp.json()).translatedText || txt).toUpperCase()
          },
          async headerLead() {
            if (this.score < 0) return '　'
            const txt = 'every language itself is also a Wikidata item'
            const resp = await fetch("https://translate.api.skitzen.com/translate", {
              method: "POST",
              body: JSON.stringify({
                q: txt,
                source: "en",
                target: this.alang,
                format: "text"
              }),
              headers: { "Content-Type": "application/json" }
            })
            return ((await resp.json()).translatedText || txt)
          },
        },
        methods: {
          newGame: function() {
            if (!this.qlang || !this.alang) {
              return
            }
            this.startBtnDisabled = true
            fetch(`${window.location.origin}/next`, {
              method: 'POST',
              headers: {'Content-Type': 'application/json'},
              body: JSON.stringify({
                lvl: -1,
                board: {},
                qlang: this.qlang,
                alang: this.alang,
                hypernym: this.hypernyms,
                qid: 0,
                is_correct: true,
              })
            })
            .then(resp => resp.json())
            .then(data => {
              this.lvl = data.lvl
              this.q_id = data.q_id
              this.q_title = data.q_title
              this.choices = data.choices
              this.answer = data.answer
              this.board = data.board
            })
            .then(() => { this.popHypernym() })
            .finally(() => { this.startBtnDisabled = false })
            this.score = -1
          },

          endGame: function() {
            fetch(`${window.location.origin}/next`, {
              method: 'POST',
              headers: {'Content-Type': 'application/json'},
              body: JSON.stringify({
                lvl: 0,
                board: this.board,
                qlang: this.qlang,
                alang: this.alang,
                hypernym: this.hypernyms,
                qid: 0,
                is_correct: false,
              })
            })
            .then(resp => resp.json())
            .then(data => {
              setTimeout(() => {
                this.board = data.board
                this.gameOver(data.score)
              }, 200);
            })
          },

          selectChoice: function(e, index) {
            e.target.classList.remove('btn-secondary')
            e.target.classList.add('disabled')
            if (this.answer == index) {
              e.target.classList.add('btn-success')
            } else {
              e.target.classList.add('btn-danger')
            }
            this.progressAnimate = true
            let flag = 0
            setTimeout(() => {
              flag = 1
            }, 150);
            fetch(`${window.location.origin}/next`, {
              method: 'POST',
              headers: {'Content-Type': 'application/json'},
              body: JSON.stringify({
                lvl: this.lvl,
                board: this.board,
                qid: this.q_id,
                qlang: this.qlang,
                alang: this.alang,
                hypernym: this.hypernyms,
                is_correct: this.answer == index,
              })
            })
            .then(resp => resp.json())
            .then(data => {
              this.lvl = data.lvl
              this.board = data.board
              if (data.score >= 0) {
                this.gameOver(data.score)
              } else {
                let interval = setInterval(() => {
                  if(flag == 1) {
                    this.q_id = data.q_id
                    this.q_title = data.q_title
                    this.choices = data.choices
                    this.answer = data.answer
                    setTimeout(() => {
                      window.scrollTo(0,document.body.scrollHeight)
                    }, 1);
                    clearInterval(interval)
                  }
                }, 5);
              }
            })
            .catch((err) => {
              console.log(err)
            })
            .finally(() => {
              let interval = setInterval(() => {
                if(flag == 1) {
                  e.target.classList.add('btn-secondary')
                  e.target.classList.remove('btn-success')
                  e.target.classList.remove('btn-danger')
                  e.target.classList.remove('disabled')
                  e.target.blur()
                  e.handled = true
                  this.progressAnimate = false
                  clearInterval(interval)
                }
              }, 5);
            })
          },

          gameOver: function (score) {
            this.score = score
            this.choices = []
            this.q_title = ''
          },

          scoreBar: function (v) {
            return JSON.parse(JSON.stringify(v)).reduce((a,u) => {
              let e = a[a.length-1] || 0
              if (e*u > 0) a[a.length-1] += Math.sign(u)
              else a.push(Math.sign(u))
              return a
            }, [])
          },

          speakTitle: function (e,i) {
            let text = i >=0 ? this.choices[i] : this.q_title
            let lang = i >=0 ? this.alang : this.qlang
            let langVoices = speechSynthesis.getVoices().filter(v => v.lang.slice(0,2) == lang)
            if (langVoices.length == 0) {
              langVoices = speechSynthesis.getVoices().filter(v => v.lang.slice(0,2) == 'en')
            }
            let sp = new SpeechSynthesisUtterance(text)
            sp.voice = langVoices[Math.floor(Math.random()*langVoices.length)]
            speechSynthesis.cancel()
            speechSynthesis.speak(sp)
          },

          // for mobile devices
          touchStart: function(e, i) {
            var that = this
            this.touchTimer = setTimeout(()=> {
              that.speakTitle(e,i)
            }, 400)
            this.touchTimerLong = setTimeout(()=> {
              let title = this.choices[i] || this.q_title
              let lang = this.choices[i] ? this.alang : this.qlang
              window.open(`https://${lang}.wikipedia.org/wiki/${title}`, '_blank')
            }, 2000)
          },
          touchEnd: function(e) {
            clearTimeout(this.touchTimer)
            clearTimeout(this.touchTimerLong)
          },

          //populate hypernym options
          popHypernym: function(onMount) {
            fetch(`${window.location.origin}/hypernym?ql=${this.qlang}&al=${this.alang}`)
            .then(resp => resp.json())
            .then(data => {
              this.hypernym_options = data
                .filter(h => h.texts[0])
                .map(h => ({
                  value: h.value,
                  texts: h.texts.map(t => t ? t : h.texts[0]).map(t => t.replace(/\(\w+\)/gm, '')),
                }))
                .map(h => ({
                  value: h.value,
                  texts: h.texts,
                  text: h.texts[this.hypernym_index]
                }))
                .sort((h1,h2) => h1.text.localeCompare(h2.text, this.alang))
              if (onMount) {
                // by default fill-in all hypernyms, excluding language==315
                this.hypernyms = data.filter(h=>h.value!==315).map(h=>h.value)
              }
            })
          },
          switchHypernymLang: function() {
            this.hypernym_index = (this.hypernym_index+1)%3
            this.hypernym_options.forEach(h => h.text=h.texts[this.hypernym_index])
            this.hypernym_options.sort((h1,h2) => h1.text.localeCompare(h2.text, (this.hypernym_index==2?this.qlang:this.alang)))
          },
          reverseHypernymSelect: function() {
            this.hypernyms = this.hypernym_options
              .map(h => h.value)
              .filter(v => this.hypernyms.indexOf(v)<0)
          },

          toggleDisplayTitleImg: function() {
            this.displayTitleImage = !this.displayTitleImage
          },

          onClickLeximapBtnAlang: function(e, lexi, setLang) {
            this.alang = lexi.value
            e.target.parentElement.previousSibling.click()
          },
          onClickLeximapBtnQlang: function(e, lexi, setLang) {
            this.qlang = lexi.value
            e.target.parentElement.previousSibling.click()
          },
        }
      })
    </script>
  </body>
</html>
